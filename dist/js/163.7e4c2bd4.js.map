{"version":3,"file":"js/163.7e4c2bd4.js","mappings":"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","sources":["webpack://final-project/./src/views/RootProductView.vue","webpack://final-project/./src/components/ProductModal.vue","webpack://final-project/./src/components/ProductModal.vue?b0ff","webpack://final-project/./src/views/RootProductView.vue?055c"],"sourcesContent":["<template>\r\n  <!-- 讀取效果 -->\r\n  <LoadingComponent :active=\"isLoading\"></LoadingComponent>\r\n  <div class=\"rootProduct p-5 my-5\">\r\n      <h3 class=\"rootPageTitle fw-bolder\">產品管理</h3>\r\n      <div class=\"text-end\">\r\n          <button class=\"btn sty3\" type=\"button\" @click=\"openModal(true)\">\r\n              增加產品\r\n          </button>\r\n      </div>\r\n      <table class=\"rootTable table mt-4\">\r\n          <thead>\r\n              <tr>\r\n                  <th width=\"120\">品牌</th>\r\n                  <th class=\"rootProductname\">產品名稱</th>\r\n                  <th width=\"120\">原價</th>\r\n                  <th width=\"120\">售價</th>\r\n                  <th width=\"100\">是否啟用</th>\r\n                  <th width=\"200\">編輯</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr v-for=\"item in products\" :key=\"item.id\">\r\n              <td width=\"120\" data-title=\"品牌：\">{{ item.category }}</td>\r\n              <td class=\"rootProductname\" data-title=\"產品名稱：\">{{ item.title }}</td>\r\n              <td width=\"120\" data-title=\"原價：\" class=\"text-right\">\r\n                  {{ item.origin_price }}\r\n              </td>\r\n              <td width=\"120\" data-title=\"售價：\" class=\"text-right\">\r\n                  {{ item.price }}\r\n              </td>\r\n              <td width=\"100\" data-title=\"是否啟用：\">\r\n                  <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\r\n                  <span class=\"text-danger\" v-else>未啟用</span>\r\n              </td>\r\n              <td width=\"200\" data-title=\"編輯：\">\r\n                  <div class=\"btn-group\">\r\n                  <button class=\"btn sty3 btn-sm btnMargin\" @click=\"openModal(false, item)\">編輯</button>\r\n                  <button class=\"btn sty6 btn-sm\" @click=\"openDelModal(item)\">刪除</button>\r\n                  </div>\r\n              </td>\r\n              </tr>\r\n          </tbody>\r\n      </table>\r\n      <PagenationComponent\r\n      :pages=\"pagination\"\r\n      @emit-pages=\"getProducts\"></PagenationComponent>\r\n      <ProductModal ref=\"pModal\"\r\n      :product=\"tempProduct\"\r\n      @update-product=\"updateProducts\"></ProductModal>\r\n      <DelModal ref=\"dModal\"\r\n      :item=\"tempProduct\"\r\n      @del-product=\"delProducts\"></DelModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductModal from '../components/ProductModal.vue'\r\nimport DelModal from '@/components/DelModal.vue'\r\nimport PagenationComponent from '../components/PagenationComponent.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      pagination: {},\r\n      tempProduct: {},\r\n      isNew: false,\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  components: {\r\n    ProductModal,\r\n    PagenationComponent,\r\n    DelModal\r\n  },\r\n  methods: {\r\n    // 取商品列表\r\n    getProducts (page = 1) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`\r\n      this.isLoading = true\r\n      this.axios.get(api).then((res) => {\r\n        this.isLoading = false\r\n        if (res.data.success) {\r\n          this.products = res.data.products\r\n          this.pagination = res.data.pagination\r\n        }\r\n      })\r\n    },\r\n    // 新增與編輯商品 isNew判斷是否為新商品\r\n    // => 若是新商品tempProduct為空 若是編輯要將點選到的該內容(item)copy給tempProduct\r\n    openModal (isNew, item) {\r\n      if (isNew) {\r\n        this.tempProduct = {}\r\n        console.log('新增')\r\n      } else {\r\n        this.tempProduct = { ...item }\r\n        console.log('編輯')\r\n      }\r\n      const productComponent = this.$refs.pModal\r\n      productComponent.showModal()\r\n      this.isNew = isNew\r\n    },\r\n    openDelModal (item) {\r\n      this.tempProduct = { ...item }\r\n      const delComponent = this.$refs.dModal\r\n      delComponent.showModal()\r\n    },\r\n    updateProducts (item) {\r\n      this.tempProduct = item\r\n      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`\r\n      let httpMethod = 'post'\r\n      if (!this.isNew) {\r\n        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`\r\n        httpMethod = 'put'\r\n      }\r\n      const productComponent = this.$refs.pModal\r\n      this.axios[httpMethod](api, { data: this.tempProduct }).then((res) => {\r\n        console.log(res)\r\n        productComponent.hideModal()\r\n        if (res.data.success) {\r\n          this.getProducts()\r\n          this.emitter.emit('push-message', {\r\n            style: 'success',\r\n            title: '更新成功'\r\n          })\r\n        } else {\r\n          this.emitter.emit('push-message', {\r\n            style: 'danger',\r\n            title: '更新失敗',\r\n            content: res.data.message.join('、')\r\n          })\r\n        }\r\n      })\r\n    },\r\n    delProducts () {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`\r\n      this.$http.delete(url).then((res) => {\r\n        console.log(res.data)\r\n        if (res.data.success) {\r\n          this.getProducts()\r\n          this.emitter.emit('push-message', {\r\n            style: 'success',\r\n            title: '刪除成功'\r\n          })\r\n        } else {\r\n          this.emitter.emit('push-message', {\r\n            style: 'danger',\r\n            title: '刪除失敗',\r\n            content: res.data.message.join('、')\r\n          })\r\n        }\r\n        const delC = this.$refs.dModal\r\n        delC.hideModal()\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .btn.sty3 {\r\n    color: #23316E;\r\n    border: 1px solid #23316E;\r\n    padding: 5px 15px;\r\n  }\r\n  .btn.sty3:hover {\r\n    background-color: #23316E;\r\n    color: #fff;\r\n  }\r\n  .btn.sty6 {\r\n    color: #ED7120;\r\n    border: 1px solid #ED7120;\r\n    padding: 5px 15px;\r\n  }\r\n  .btn.sty6:hover {\r\n    background-color: #ED7120;\r\n    color: #fff;\r\n  }\r\n  .rootProduct {\r\n    box-shadow: 2px 2px 8px 2px #ccc;\r\n    background-color: #fff;\r\n  }\r\n  .rootPageTitle {\r\n    color: #23316E;\r\n  }\r\n  @media(max-width:990px) {\r\n    .rootProduct th {\r\n        width:150px\r\n    }\r\n    .rootProduct th.rootProductname {\r\n        width: 200px;\r\n    }\r\n  }\r\n  @media(max-width:768px) {\r\n    .rootProduct th {\r\n        display: none;\r\n    }\r\n    .rootProduct tbody tr {\r\n        display: flex;\r\n        flex-direction: column;\r\n        border: 1px solid #ccc;\r\n        margin-bottom: 25px;\r\n    }\r\n    .rootProduct tbody tr td:before{\r\n        content: attr(data-title);\r\n        display: inline-block;\r\n        font-weight: bold;\r\n        padding-right: 5px;\r\n    }\r\n    .btnMargin {\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n</style>\r\n","<template>\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\r\n        <!-- Loading -->\r\n        <LoadingComponent :active=\"isLoading\"></LoadingComponent>\r\n        <div class=\"modal-dialog modal-xl\" role=\"document\" >\r\n            <div class=\"modal-content border-0\">\r\n                <!-- modal標題 -->\r\n                <div class=\"modal-header bg-dark text-white\">\r\n                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n                        <span>新增產品</span>\r\n                    </h5>\r\n                    <button type=\"button\" class=\"btn-close\"\r\n                        data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <!-- modal內容 -->\r\n                <div class=\"modal-body\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-lg-4 col-md-12\">\r\n                            <!-- 上傳單圖網址 -->\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"image\"\r\n                                        placeholder=\"請輸入圖片連結\"\r\n                                        v-model=\"tempProduct.imageUrl\">\r\n                            </div>\r\n                            <!-- 上傳單圖檔案 -->\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"customFile\" class=\"form-label\">或 上傳圖片\r\n                                    <i class=\"fas fa-spinner fa-spin\"></i>\r\n                                </label>\r\n                                <input type=\"file\" id=\"customFile\" class=\"form-control\" ref=\"fileInput\" @change=\"uploadFile\">\r\n                            </div>\r\n                            <img class=\"img-fluid\" alt=\"\" :src=\"tempProduct.imageUrl\">\r\n                            <!-- 多圖 -->\r\n                            <div class=\"mt-5\">\r\n                                <div class=\"imgGroup mb-3\">\r\n                                    <div class=\"smallImg\" v-for=\"i in tempProduct.imagesUrl\" :key=\"i.id\" >\r\n                                        <a href=\"#\" @click.prevent=\"connectImgs(i)\">\r\n                                            <img :src=\"i\">\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"mb-3 input-group\" >\r\n                                    <input type=\"url\" class=\"form-control form-control\"\r\n                                            placeholder=\"請輸入圖片連結 (或點擊小圖獲得連結)\"\r\n                                            v-model=\"smallImg\">\r\n                                    <button type=\"button\" class=\"btn btn-outline-danger\" @click=\"removeImg(smallImg)\">\r\n                                        移除\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <button class=\"btn btn-outline-primary btn-sm d-block w-100 mt-3\" @click=\"addMulitImg(smallImg)\">\r\n                                    新增圖片\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-lg-8 col-md-12\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"title\" class=\"form-label\">標題</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"title\"\r\n                                        placeholder=\"請輸入標題\"\r\n                                        v-model=\"tempProduct.title\">\r\n                            </div>\r\n\r\n                            <div class=\"row gx-2\">\r\n                            <div class=\"mb-3 col-md-6\">\r\n                                <label for=\"category\" class=\"form-label\">品牌</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"category\"\r\n                                        placeholder=\"請輸入品牌\"\r\n                                        v-model=\"tempProduct.category\">\r\n                            </div>\r\n                            <div class=\"mb-3 col-md-6\">\r\n                                <label for=\"price\" class=\"form-label\">單位</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"unit\"\r\n                                        placeholder=\"請輸入單位\"\r\n                                        v-model=\"tempProduct.unit\">\r\n                            </div>\r\n                            </div>\r\n\r\n                            <div class=\"row gx-2\">\r\n                            <div class=\"mb-3 col-md-6\">\r\n                                <label for=\"origin_price\" class=\"form-label\">原價</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"origin_price\"\r\n                                        placeholder=\"請輸入原價\"\r\n                                        v-model=\"tempProduct.origin_price\">\r\n                            </div>\r\n                            <div class=\"mb-3 col-md-6\">\r\n                                <label for=\"price\" class=\"form-label\">售價</label>\r\n                                <input type=\"number\" class=\"form-control\" id=\"price\"\r\n                                        placeholder=\"請輸入售價\"\r\n                                        v-model=\"tempProduct.price\">\r\n                            </div>\r\n                            </div>\r\n                            <hr>\r\n\r\n                            <div class=\"mb-3\">\r\n                            <label for=\"description\" class=\"form-label\">產品描述</label>\r\n                            <textarea type=\"text\" class=\"form-control\" id=\"description\"\r\n                                        placeholder=\"請輸入產品描述\"\r\n                                        v-model=\"tempProduct.description\"></textarea>\r\n                            </div>\r\n                            <!-- <div class=\"mb-3\">\r\n                            <label for=\"content\" class=\"form-label\">說明內容</label>\r\n                            <textarea type=\"text\" class=\"form-control\" id=\"content\"\r\n                                        placeholder=\"請輸入產品說明內容\"\r\n                                        v-model=\"tempProduct.content\"></textarea>\r\n                            </div> -->\r\n                            <div class=\"mb-3\">\r\n                            <div class=\"form-check\">\r\n                                <input class=\"form-check-input\" type=\"checkbox\"\r\n                                        :true-value=\"1\"\r\n                                        :false-value=\"0\"\r\n                                        id=\"is_enabled\"\r\n                                        v-model=\"tempProduct.is_enabled\">\r\n                                <label class=\"form-check-label\" for=\"is_enabled\">\r\n                                是否啟用\r\n                                </label>\r\n                            </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- modal按鈕 -->\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                            data-bs-dismiss=\"modal\">取消\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"$emit('update-product', tempProduct)\">確認</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from '@/mixins/modalMixin'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      modal: {},\r\n      tempProduct: {},\r\n      smallImg: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n  mixins: [modalMixin],\r\n  watch: {\r\n    // 監聽props的product\r\n    product () {\r\n      this.tempProduct = this.product\r\n      console.log(this.tempProduct)\r\n    }\r\n  },\r\n  props: {\r\n    // 父元件的tempProduct\r\n    product: {\r\n      type: Object,\r\n      default () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    uploadFile () {\r\n      const uploadFile = this.$refs.fileInput.files[0]\r\n      const formData = new FormData()\r\n      //   上傳圖片用 參考文件:https://developer.mozilla.org/en-US/docs/Web/API/FormData/append\r\n      formData.append('file-to-upload', uploadFile)\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`\r\n      this.isLoading = true\r\n      this.axios.post(api, formData).then((res) => {\r\n        this.isLoading = false\r\n        if (res.data.success) {\r\n          alert('圖片上傳成功！')\r\n          this.tempProduct.imageUrl = res.data.imageUrl\r\n        } else {\r\n          alert('圖片上傳失敗，請重新上傳')\r\n          console.log(res.data)\r\n        }\r\n      })\r\n    },\r\n    addMulitImg (img) {\r\n      this.tempProduct.imagesUrl.push(img)\r\n    },\r\n    connectImgs (img) {\r\n      this.smallImg = img\r\n    },\r\n    removeImg (img) {\r\n      this.tempProduct.imagesUrl = this.tempProduct.imagesUrl.filter((i) => {\r\n        return i !== img\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .imgGroup {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n  }\r\n  .imgGroup .smallImg{\r\n    width: 20%;\r\n    border: 1px solid #fff;\r\n  }\r\n  .imgGroup .smallImg a{\r\n    display: block;\r\n  }\r\n  .imgGroup .smallImg a img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n</style>\r\n","import { render } from \"./ProductModal.vue?vue&type=template&id=21f4cb6c\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport \"./ProductModal.vue?vue&type=style&index=0&id=21f4cb6c&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user110827\\\\Desktop\\\\project\\\\momao\\\\final-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./RootProductView.vue?vue&type=template&id=eb26a190\"\nimport script from \"./RootProductView.vue?vue&type=script&lang=js\"\nexport * from \"./RootProductView.vue?vue&type=script&lang=js\"\n\nimport \"./RootProductView.vue?vue&type=style&index=0&id=eb26a190&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user110827\\\\Desktop\\\\project\\\\momao\\\\final-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","_createVNode","_component_LoadingComponent","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","type","onClick","$options","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","item","key","id","_hoisted_6","category","_hoisted_7","title","_hoisted_8","origin_price","_hoisted_9","price","_hoisted_10","is_enabled","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_component_PagenationComponent","pages","onEmitPages","_component_ProductModal","ref","product","onUpdateProduct","_component_DelModal","onDelProduct","tabindex","role","for","placeholder","imageUrl","onChange","alt","src","imagesUrl","i","href","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","unit","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","description","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_ctx","data","modal","tempProduct","smallImg","isLoading","mixins","modalMixin","watch","this","console","log","props","Object","default","methods","uploadFile","$refs","fileInput","files","formData","FormData","append","api","axios","post","then","res","success","alert","addMulitImg","img","push","connectImgs","removeImg","filter","__exports__","products","pagination","isNew","inject","components","ProductModal","PagenationComponent","DelModal","getProducts","page","get","openModal","productComponent","pModal","showModal","openDelModal","delComponent","dModal","updateProducts","httpMethod","hideModal","emitter","emit","style","content","message","join","delProducts","url","$http","delete","delC","created","render"],"sourceRoot":""}