"use strict";(self["webpackChunkfinal_project"]=self["webpackChunkfinal_project"]||[]).push([[299],{1299:function(t,e,s){s.r(e),s.d(e,{default:function(){return K}});s(7658);var l=s(3396),i=s(7139),r=s(9242);const a=(0,l._)("div",{class:"noteList row py-4"},[(0,l._)("div",{class:"progress px-0"},[(0,l._)("div",{class:"progress-bar barBackground progress-bar-striped",role:"progressbar",style:{width:"100%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),(0,l._)("div",{class:"col-4"},[(0,l._)("div",{class:"notes d-flex flex-column align-items-center"},[(0,l._)("div",{class:"notesItem active mb-2"},[(0,l._)("span",null,"1")]),(0,l._)("p",{class:"notesTitle"}," 確認商品 ")])]),(0,l._)("div",{class:"col-4"},[(0,l._)("div",{class:"notes d-flex flex-column align-items-center"},[(0,l._)("div",{class:"notesItem active mb-2"},[(0,l._)("span",null,"2")]),(0,l._)("p",{class:"notesTitle"}," 填寫資料 ")])]),(0,l._)("div",{class:"col-4"},[(0,l._)("div",{class:"notes d-flex flex-column align-items-center"},[(0,l._)("div",{class:"notesItem active mb-2"},[(0,l._)("span",null,"3")]),(0,l._)("p",{class:"notesTitle"}," 完成訂單 ")])])],-1),n={class:"row flex-lg-row flex-column-reverse mb-5"},d={class:"col-lg-8 col-md-12"},o={class:"check3Table table"},c=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"fs-5"},"聯絡資訊")])],-1),u=(0,l._)("th",{width:"15%"},"訂購時間：",-1),p=(0,l._)("th",{width:"15%",class:"orderId"},"訂單編號：",-1),_={class:"d-flex justify-content-between align-items-center"},h=(0,l._)("th",{width:"15%"},"Email：",-1),m=(0,l._)("th",{width:"15%"},"收件人姓名：",-1),v=(0,l._)("th",{width:"15%"},"收件人電話：",-1),w=(0,l._)("th",{width:"15%"},"收件人地址：",-1),g=(0,l._)("th",{width:"15%"},"付款狀態：",-1),f={key:0},b={key:1,class:"text-success"},y={class:"col-lg-4 col-md-12"},x={class:"checkOrder p-4"},k=(0,l._)("p",{class:"fw-bold fs-4"},"我的訂單",-1),I={class:"itemImg"},z=["src"],T={class:"d-flex w-100 ps-3 justify-content-between align-items-center"},D={class:"itemGroup mb-1 d-flex flex-column"},L={class:"itemTitle"},O={class:"fw-bold"},$={class:"itemUnit"},j={class:"fw-bold"},C={class:"itemPrice"},B={class:""},M={class:"totalPrice pt-3 mt-3"},H={class:"text-success pw-bold fs-4 d-flex justify-content-between"},P=(0,l._)("span",null,"總結： ",-1),U={class:"text-end"};function Y(t,e,s,Y,q,E){const G=(0,l.up)("LoadingComponent");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(G,{active:q.isLoading},null,8,["active"]),a,(0,l._)("div",n,[(0,l._)("div",d,[(0,l._)("table",o,[c,(0,l._)("tbody",null,[(0,l._)("tr",null,[u,(0,l._)("td",null,(0,i.zw)(new Date(1e3*q.order.create_at).toLocaleDateString()),1)]),(0,l._)("tr",null,[p,(0,l._)("td",null,[(0,l._)("div",_,[(0,l._)("span",{ref:"copyId"},(0,i.zw)(q.order.id),513),(0,l._)("button",{type:"button",class:"btn sty7",onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>E.copyBtn&&E.copyBtn(...t)),["prevent"]))},"Copy")])])]),(0,l._)("tr",null,[h,(0,l._)("td",null,(0,i.zw)(q.order.user.email),1)]),(0,l._)("tr",null,[m,(0,l._)("td",null,(0,i.zw)(q.order.user.name),1)]),(0,l._)("tr",null,[v,(0,l._)("td",null,(0,i.zw)(q.order.user.tel),1)]),(0,l._)("tr",null,[w,(0,l._)("td",null,(0,i.zw)(q.order.user.address),1)]),(0,l._)("tr",null,[g,(0,l._)("td",null,[q.order.is_paid?((0,l.wg)(),(0,l.iD)("span",b,"付款完成")):((0,l.wg)(),(0,l.iD)("span",f,"尚未付款"))])])])])]),(0,l._)("div",y,[(0,l._)("div",x,[k,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.order.products,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"item d-flex mb-1",key:t.id},[(0,l._)("div",I,[(0,l._)("img",{src:t.product.imageUrl,style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,z)]),(0,l._)("div",T,[(0,l._)("div",D,[(0,l._)("div",L,[(0,l._)("span",O,(0,i.zw)(t.product.title),1)]),(0,l._)("div",$,[(0,l._)("span",j,(0,i.zw)(t.qty)+" "+(0,i.zw)(t.product.unit),1)])]),(0,l._)("div",C,[(0,l._)("span",B,"$ "+(0,i.zw)(t.total),1)])])])))),128)),(0,l._)("div",M,[(0,l._)("p",H,[P,(0,l._)("span",null,"NT$ "+(0,i.zw)(q.fTotal),1)])]),(0,l._)("div",U,[!1===q.order.is_paid?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"btn sty7 w-100 mt-3",onClick:e[1]||(e[1]=(0,r.iM)(((...t)=>E.payOrder&&E.payOrder(...t)),["prevent"]))},"確認付款去")):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn sty7 w-100 mt-3",onClick:e[2]||(e[2]=(0,r.iM)((t=>this.$router.push("/")),["prevent"]))},"回首頁"))])])])])],64)}var q={data(){return{order:{user:{}},orderId:"",fTotal:0,tempOrder:[],isLoading:!1}},inject:["emitter"],methods:{getOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/david-api/order/${this.orderId}`;this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.order=t.data.order,this.fTotal=t.data.order.total,console.log("getOrder",this.order))}))},payOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/david-api/pay/${this.orderId}`;this.$http.post(t).then((t=>{console.log(t),this.isLoading=!1,t.data.success&&this.getOrder()}))},copyBtn(){navigator.clipboard.writeText(this.$refs.copyId.innerText),this.emitter.emit("push-message",{style:"success",title:"已複製至剪貼簿"})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},E=s(89);const G=(0,E.Z)(q,[["render",Y]]);var K=G}}]);
//# sourceMappingURL=299.bfc86a24.js.map